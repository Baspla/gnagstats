<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Statistik-Übersicht</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2em; }
        h1 { color: #2c3e50; }
        section { margin-bottom: 2em; }
        table { border-collapse: collapse; width: 100%; margin-top: 1em; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background: #f4f4f4; }
    </style>
</head>
<body>
    <h1>Statistik-Übersicht</h1>
    <section>
        <h2>Meistgespielte Steam-Spiele (letzte 7 Tage)</h2>
        {% if steam_most_played %}
        <table>
                <tr><th>Spiel</th><th>Spielzeit</th></tr>
                {% for entry in steam_most_played %}
                <tr>
                    <td>{{ entry[0] if entry is iterable and entry is not string else entry.game_name if entry.game_name is defined else entry }}</td>
                    <td>{{ seconds_to_human_readable(entry[2] if entry is iterable and entry|length > 2 else entry.total_playtime if entry.total_playtime is defined else entry[1] if entry|length > 1 else 0) }}</td>
                </tr>
            {% endfor %}
        </table>
        {% else %}<p>Keine Daten.</p>{% endif %}
    </section>
    <section>
        <h2>Aktivste Discord-Voice-Channels (letzte 7 Tage)</h2>
        {% if discord_busiest_channels %}
        <table>
                <tr><th>Channel</th><th>Gesamte Nutzer</th></tr>
                {% for entry in discord_busiest_channels %}
                <tr>
                    <td>{{ entry[0] if entry is iterable and entry is not string else entry.channel_name if entry.channel_name is defined else entry }}</td>
                    <td>{{ seconds_to_human_readable(entry[1] if entry is iterable and entry|length > 1 else entry.total_voicetime if entry.total_voicetime is defined else 0) }}</td>
                </tr>
            {% endfor %}
        </table>
        {% else %}<p>Keine Daten.</p>{% endif %}
    </section>
</body>
</html>
